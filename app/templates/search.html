{% extends "base.html" %}

{% block content %}

    {% if mode %}

        {% if mode == 'none' %}
        <h3>Wops... No results were found.</h3>
        {% endif %}

        {% if mode != 'none' %}
        <table align="center" width="100%">
        {% for movie in session['movies'] %}
            {% if movie.get('image') and movie.get('title') and movie.get('year') %}
            <tr><td>
                    <table class="styled-table">
                        <tr><td>
                            <img src="{{ movie.get('image') }}" class="styled-poster">
                        </td></tr>
                        <tr><td>
                            <b>
                            {{ movie.get('title') }} ({{ movie.get('year') }})
                            </b>
                            {% if movie.get('genre') %}
                                <br/>
                                {{ movie.get('genre') }}
                            {% endif %}
                            {% if movie.get('directors') %}
                                <br/>
                                By {{ ' and '.join(movie.get('directors')) }}
                            {% endif %}
                            {% if movie.get('cast') %}
                                <br/>
                                With {{ ', '.join(movie.get('cast')) }}
                            {% endif %}
                        </td></tr>
                        <tr><td>
                            <table width="100%"><tr>
                                <td align="{{'right' if mode == 'single' else 'center'}}" valign="top">
                                    <input type="button" class="styled-button-2" onclick="location.href='{{ url_for('add', movie_id=movie.get('id')) }}';" value="Add movie" />
                                </td>
                                {% if mode == 'single' %}
                                    <td align="left" valign="top">
                                        <form action="" method="post">
                                            {{ singleResultForm.hidden_tag() }}
                                            {{ singleResultForm.moreButton(class="styled-button") }}
                                        </form>
                                    </td>
                                {% endif %}
                            </tr></table>
                        </td></tr>
                    </table>
            </td></tr>
            {% endif %}
        {% endfor %}
        </table>
        {% endif %}
    {% endif %}
{% endblock %}
