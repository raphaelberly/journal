{% extends "base.html" %}

{% block content %}

<div class="statistics">

<center><table>

    <tr>
        <td class="icon"><img src="/static/images/statistics/overall.png"></td>
        <td class="sideline"></td>
        <td>
            <p class="top-type">Overall</p>
            {% for element in counts %}
                <p><span class="big-number">{{ counts[element].count }}</span>
                <br/>{{ counts[element].description }}</p>
            {% endfor %}
        </td>
    </tr>

    {% for element in movies %}
        <td class="icon"><img src="/static/images/statistics/{{ element['image'] }}"></td>
        <td class="sideline"></td>
        <td>
            <p class="top-type">{{ element['section'] }}</p>
            {% for item in element['movies'] %}

            <p><span class="big-number">{{ item['rank'] }}</span>{{ item['suffix'] }}
            <br/><span class="top-name">{{ item['title'] }} ({{ item['year'] }})</span>
            <br/>{{ ', '.join(item['genres'].split(',')) }}
            <br/>{{ [item['grade']|int, item['grade']]|max }}/10

            {% endfor %}
        </p>

        </td>
    </tr>
    {% endfor %}


{% for element in tops %}

    <tr>
    <td class="icon"><img src="/static/images/statistics/{{ element }}.png"></td>
    <td class="sideline"></td>
    <td>
    <p class="top-type">Top {{ element }}</p>

    {% for top in tops[element] %}

        <p><span class="big-number">{{ "%.1f"|format(top.grade) }}</span>
        <br/><span class="top-name">{{ top.name }}</span>
        <br/>Top {{ top.top_3_movies|length }} movies ({{ top.count }} in total):

        {% for title in top.top_3_movies %}

            <br/><span class="top-movies"> &bull; {{ title }}</span>
        {% endfor %}
        </p>

    {% endfor %}

    </td>
    </tr>

{% endfor %}

</table></center>

</div>

{% endblock %}
